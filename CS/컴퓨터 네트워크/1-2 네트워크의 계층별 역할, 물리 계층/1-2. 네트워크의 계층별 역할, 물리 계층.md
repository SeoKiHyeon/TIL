# 1-2 네트워크의 계층별 역할, 물리 계층


### OSI 7 Layer와 TCP/IP의 관계

![OSI-TCP-IP](./images/OSI-TCP-IP.png)

1. OSI 7 계층 vs TCP/IP
- OSI 7계층은 이론적 표준 모델, TCP/IP는 실제 구현된 사실상의 표준
- TCP/IP는 OSI 7계층을 단순화한 구조

2. 계층별 매핑
- Application(응용) : OSI의 Application, Presentation, Session 계층 통합
- Transport(전송) : TCP/UDP 프로토콜 담당
- Network(네트워크) : IPv4/IPv6 담당
- Physical(물리) : OSI의 Datalink, Physical 계층 통합


### OSI 7계층의 각 계층별 역할

1. Application Layer (응용 계층)
- Email, Web 브라우저, FTP, ping, Application 등의 서비스 제공
- 사용자와 직접 상호작용하는 계층

2. Presentation Layer (표현 계층)
- 문법, 구문, 체계 확립
- 데이터의 형식 변환, 암호화/복호화 담당

3. Session Layer (세션 계층)
- 프로그램간의 논리적 연속
- 통신 세션을 구성하고 관리

4. Transport Layer (전송 계층)
- 양쪽 끝간의 신뢰성 보장 (TCP/UDP)
- 데이터의 분할과 재조립 담당
- User Process 영역과 Kernel 영역의 경계

5. Network Layer (네트워크 계층)
- 해당 주소 체계에 따라 경로 설정 (IPv4/IPv6)
- 라우팅 기능 수행

6. Datalink Layer (데이터링크 계층)
- 두 node간의 통신관리, 흐름제어
- MAC 주소를 사용하여 프레임 전송

7. Physical Layer (물리 계층)
- 일련의 0과 1 bit(전기적 신호를 매체로 전달)
- 실제 물리적 연결과 전기적 신호 전송


### 종단간의 연결 과정

![connection-flow](./images/connection-flow.png)

1. 데이터 생성 및 송신 과정
- Application 계층에서 데이터 생성
- 각 계층을 거치며 헤더 정보가 추가됨 (캡슐화)
- Transport → Network → Data Link → Physical 순으로 하위 계층 이동
- 물리 계층에서 실제 비트 신호로 전송

2. 중간 경로 (라우터/스위치)
- Network 계층에서 경로 결정
- Data Link 계층에서 다음 홉으로 전달

3. 데이터 수신 과정
- Physical 계층에서 비트 신호 수신
- Data Link → Network → Transport → Application 순으로 상위 계층 이동
- 각 계층에서 헤더 정보 제거 (역캡슐화)
- Application 계층에서 최종 데이터 전달


### 물리 계층 (Physical Layer)

![physical-layer](./images/physical-layer.png)

1. 개요
- 물리적 매체를 통한 비트 스트림 전송에 요구되는 기능을 담당
- 기계적, 전기적, 전송매체

2. 물리 계층의 주요 기능
- 인터페이스와 매체의 물리적인 특성 : 장치와 전송매체 간의 인터페이스 특성 규정
- 비트의 표현 : 비트를 전송하기 위해 전기적 또는 광학적인 신호로 부호화
- 데이터 속도 : 신호가 유지되는 비트의 주기를 규정
- 비트의 동기화 : 송신자와 수신자는 같은 클록을 사용

3. 물리 계층을 다루기 위한 하드웨어 칩 예시
- CS8900A와 같은 이더넷 컨트롤러 사용


### CS8900A의 예

![CS8900A](./images/CS8900A.png)

1. 구성 요소
- ISA Bus Interface : PC와의 인터페이스
- EEPROM : 설정 저장
- RAM : 데이터 버퍼링
- Encoder/Decoder : 데이터 인코딩/디코딩
- Transmitter/Receiver : 송수신 처리
- RJ45 Interface (10BASE-T) : 물리적 연결 포트

2. 주요 기능
- Configuration : 패킷 페이지 설정, 20MHz 버퍼
- Transformer : 신호 변환
- CSMA/CD : 충돌 감지 프로토콜
- NRZ/Manchester Signal 변환 : 신호 인코딩 방식


### 물리계층을 위한 프로토콜

![protocols](./images/protocols.png)

1. MAC (Medium Access Control) 필요성
- 자유경쟁 (선착순)
  - Aloha
  - Slotted Aloha : 각각 할당
  - CSMA (Carrier Sense Multiple Access)
  - CSMA/CD (CSMA/Collision Detection)
- Token 방식

2. CSMA/CD → IEEE 802.3
- 한 slot의 크기 계산 방법
  - 51.2 us = 64byte 전송 소요 시간
- 16번까지 재시도


### 참고 사항

- 물리 계층은 데이터의 실제 전송을 담당하는 가장 기본적인 계층
- 상위 계층으로 갈수록 추상화되고 사용자 친화적이 됨
- 각 계층은 독립적으로 동작하며 인접 계층과만 통신
